name: Sync items to Game Roadmap project

on:
  issues:
    types: [opened, labeled, closed, reopened]
  pull_request:
    types: [opened, labeled, closed, reopened]

jobs:
  sync-to-project:
    if: github.actor != 'dependabot[bot]' && vars.PROJECT_URL && vars.PROJECT_URL != ''
    runs-on: ubuntu-latest
    permissions:
      contents: read
      issues: write
      pull-requests: write
    steps:
      - name: Add to project
        uses: actions/add-to-project@v0.6.0
        with:
          # Set this after creating the user/org-level Project
          # Example (user project): https://github.com/users/AstroSteveo/projects/2
          # Example (org project):  https://github.com/orgs/<org>/projects/1
          project-url: ${{ vars.PROJECT_URL }}
          github-token: ${{ secrets.PROJECTS_TOKEN }}
          labeled: story, bug, task
          # If unlabeled, items won't be added; adjust as desired